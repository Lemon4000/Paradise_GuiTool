# 波特率管理功能说明

## 新增功能

### 1. 预设波特率已包含 76800
现在波特率下拉框包含以下预设值：
- 9600, 19200, 38400, 57600, **76800**, 115200, 230400, 460800, 921600, 2000000

### 2. 波特率记忆功能
- ? **自动记忆**：程序会记住您上次使用的波特率
- ? **自动恢复**：下次打开程序时，自动选择上次使用的波特率
- ? **配置文件**：配置保存在 `config/user_config.json`

### 3. 波特率管理器（?按钮）
点击波特率下拉框旁边的 **?** 按钮，可以打开波特率管理器：

#### 功能：
- **查看所有波特率**：显示当前所有可用的波特率（包括预设和自定义）
- **添加自定义波特率**：输入300-3000000之间的任意波特率值
- **删除自定义波特率**：删除您添加的自定义波特率（预设波特率无法删除）
- **设置默认波特率**：设置程序首次启动时使用的默认波特率

#### 使用方法：
1. 点击工具栏上的 **?** 按钮
2. 在"添加自定义波特率"区域输入数值（例如：76801）
3. 点击"添加"按钮
4. 新波特率会自动出现在列表中
5. 选中某个波特率，点击"设为默认"可设置为默认值
6. 自定义波特率可以通过选中后点击"删除自定义"来移除

### 4. HEX文件路径记忆
- ? **路径记忆**：记住上次选择的HEX文件路径
- ? **智能打开**：下次选择文件时，自动定位到上次的目录
- ? **无历史记录**：如果没有历史记录，默认打开程序根目录

### 5. 自定义波特率模式（保持原有功能）
点击"自定义"按钮可以手动输入波特率：
- 按钮变蓝并显示"预设"
- 下拉框变为可编辑的输入框
- 直接输入任意波特率值（300-3000000）
- 再次点击"预设"按钮恢复为下拉选择模式

## 配置文件位置
`config/user_config.json`

## 配置文件结构
```json
{
    "baud_rates": [9600, 19200, 38400, 57600, 76800, 115200, 230400, 460800, 921600, 2000000],
    "default_baud_rate": 2000000,
    "last_baud_rate": 2000000,
    "last_hex_path": "",
    "custom_baud_rates": []
}
```

- `baud_rates`: 预设波特率列表（不可通过界面修改）
- `default_baud_rate`: 默认波特率（首次启动使用）
- `last_baud_rate`: 上次使用的波特率（每次关闭程序时保存）
- `last_hex_path`: 上次使用的HEX文件路径
- `custom_baud_rates`: 用户添加的自定义波特率列表

## 注意事项
1. 配置文件会在程序首次运行时自动创建
2. 每次添加/删除自定义波特率、设置默认值时会自动保存
3. 程序关闭时会自动保存当前波特率
4. 如果配置文件损坏，程序会自动重置为默认配置
5. 波特率范围限制为 300-3000000 bps

## 技术实现
- 使用 JSON 格式存储配置
- ConfigManager 类管理所有配置操作
- 自动保存机制确保配置不丢失
- UTF-8 编码确保兼容性
